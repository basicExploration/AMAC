# go包管理工具
## go语言的包导入过程
- go编译快的原因
- go程序的构建过程

go 程序编译快的原因。1是因为go要求每一个包都必须显式的标记处引入的包。
```go
package hi

import (
  "fmt"
  "io"

  "github.com/shgopher/hui"
)
```
所以编译器无需去查找这个文件中具体引入了哪些包就可以在头部检索出全部的导包名单，2是因为go语言不允许循环引用，比如说a引用了b，b又引入了a，所以每一个包都是独立的存在，处于“有向无环图“ 这种格式下，进而可以并行去编译不同的包，提高编译效率。3包编译的结果里（`xx.o`,`xx.a`）中不仅存储了此包的导出信息，还存储了它引入的包的导出信息，这样编译器只需要读取一个目标文件就可以获取全部的包信息，不需要读取全部的文件。比如p包要引入q包，那么q包的.a文件已经包括了它引入的全部包的导出信息，那么p包引入q包的时候只需要读q包这一个包就可以获取全部的信息，不需要更深层次的递归了。有点类似分封制，我帝王p包，我的直接负责人是诸侯q，q掌握了它下级s的所有数据，假设s还有下级，s掌握了w的所有数据，然后层层回报，当帝王p最终编译的时候，它已经完全拥有了所有的数据，所以只看q一个包即可。再结合每一个包都可以独立的并行编译，所以这一整套下来go的编译速度就会很快。并且在go.mod文件中也会详细记录使用过的包及其版本，那么并行下载，快速编译就不是梦了。

go程序的构建过程。go程序的建立是由编译和链接两个阶段组成的，举个例子
有一个项目拥有一个main包，一个lib包，lib包会被引入到main包中，那么编译的过程是这样的，首先创建一个临时工作区域，编译lib包为lib.a,编译main包为main.a,链接器将lib.a和main.a链接成name.out ，然后改名为name（unix-like），**使用第三方包的意思就是链接了该包的源代码编译的最新的.a文件而已**，并且每次编译都会重新编译最新的.a文件，但是标准库除外，并不会每次编译都会重新编译标准库，所以说如果你修改了源码一定得把标准库.a文件删除，并且build的时候使用 `build -a` 的方式才可以使用自己更新的标准库。

一个小tip：go导包的时候引入的是路径名称，路径名称**通常**最后一位路径名称跟包名保持一致，当然也可以不一致。例如`github.com/shgopher/go-hui` 但是实际上包名称是这个`package hui`，所以导入的时候按照`github.com/shgopher/go-hui`,使用的时候用`hui.xxx()`。

因为包的名称很容易发生冲突，所以go接受包名称的重命名

```go
import (

  app  "github.com/shgopher/app"
  app1  "github.com/googege/app"
)
```

## go module 构建工具
- go111MODULE
- GOPROXY 
- GOSUMDB
- module版本的升级
- workspace






## 参考资料
- https://dev.to/gophers/what-are-go-workspaces-and-how-do-i-use-them-1643
- https://zhuanlan.zhihu.com/p/432763448